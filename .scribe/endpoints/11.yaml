name: Monetization
description: 'Retrieve the list of plans that can currently be purchased. Plans marked as inactive are excluded.'
endpoints:
  -
    httpMethods:
      - GET
    uri: api/monetization/plans
    metadata:
      groupName: Monetization
      groupDescription: 'Retrieve the list of plans that can currently be purchased. Plans marked as inactive are excluded.'
      subgroup: ''
      subgroupDescription: ''
      title: 'List active plans'
      description: ''
      authenticated: true
      deprecated: false
      custom: []
    headers:
      Authorization: 'Bearer {YOUR_ACCESS_TOKEN}'
      Content-Type: application/json
      Accept: application/json
    urlParameters: []
    cleanUrlParameters: []
    queryParameters: []
    cleanQueryParameters: []
    bodyParameters: []
    cleanBodyParameters: []
    fileParameters: []
    responses:
      -
        status: 401
        content: '{"message":"Unauthenticated."}'
        headers:
          cache-control: 'no-cache, private'
          content-type: application/json
          access-control-allow-origin: '*'
        description: null
        custom: []
    responseFields:
      'data[].id':
        name: 'data[].id'
        description: 'Unique identifier of the plan.'
        required: false
        example: null
        type: integer
        enumValues: []
        exampleWasSpecified: false
        nullable: false
        custom: []
      'data[].name':
        name: 'data[].name'
        description: 'Display name for the plan.'
        required: false
        example: null
        type: string
        enumValues: []
        exampleWasSpecified: false
        nullable: false
        custom: []
      'data[].price':
        name: 'data[].price'
        description: 'Cost of the plan in the configured currency.'
        required: false
        example: null
        type: number
        enumValues: []
        exampleWasSpecified: false
        nullable: false
        custom: []
    auth:
      - headers
      - Authorization
      - 'Bearer 6g43cv8PD1aE5beadkZfhV6'
    controller: null
    method: null
    route: null
    custom: []
  -
    httpMethods:
      - POST
    uri: api/monetization/purchases
    metadata:
      groupName: Monetization
      groupDescription: |-
        Start a new purchase for an ad promotion plan. Depending on the payload, the purchase may be automatically paid with the
        wallet.
      subgroup: ''
      subgroupDescription: ''
      title: 'Create ad plan purchase'
      description: ''
      authenticated: true
      deprecated: false
      custom: []
    headers:
      Authorization: 'Bearer {YOUR_ACCESS_TOKEN}'
      Content-Type: application/json
      Accept: application/json
    urlParameters: []
    cleanUrlParameters: []
    queryParameters: []
    cleanQueryParameters: []
    bodyParameters:
      ad_id:
        name: ad_id
        description: 'Identifier of the ad to promote.'
        required: true
        example: 41
        type: integer
        enumValues: []
        exampleWasSpecified: true
        nullable: false
        custom: []
      plan_id:
        name: plan_id
        description: 'Optional plan identifier when selecting directly by ID.'
        required: false
        example: 5
        type: integer
        enumValues: []
        exampleWasSpecified: true
        nullable: true
        custom: []
      plan_slug:
        name: plan_slug
        description: 'Optional plan slug alternative to `plan_id`.'
        required: false
        example: premium-weekly
        type: string
        enumValues: []
        exampleWasSpecified: true
        nullable: true
        custom: []
      gateway:
        name: gateway
        description: 'Preferred payment gateway key.'
        required: false
        example: payping
        type: string
        enumValues: []
        exampleWasSpecified: true
        nullable: true
        custom: []
      pay_with_wallet:
        name: pay_with_wallet
        description: 'Whether to use the wallet balance immediately.'
        required: false
        example: false
        type: boolean
        enumValues: []
        exampleWasSpecified: true
        nullable: false
        custom: []
    cleanBodyParameters:
      ad_id: 41
      plan_id: 5
      plan_slug: premium-weekly
      gateway: payping
      pay_with_wallet: false
    fileParameters: []
    responses: []
    responseFields:
      data.id:
        name: data.id
        description: 'Unique identifier of the created purchase.'
        required: false
        example: null
        type: integer
        enumValues: []
        exampleWasSpecified: false
        nullable: false
        custom: []
      payment:
        name: payment
        description: 'Included when the wallet covers the full purchase amount.'
        required: false
        example: null
        type: object|null
        enumValues: []
        exampleWasSpecified: false
        nullable: false
        custom: []
    auth:
      - headers
      - Authorization
      - 'Bearer 6g43cv8PD1aE5beadkZfhV6'
    controller: null
    method: null
    route: null
    custom: []
  -
    httpMethods:
      - GET
    uri: 'api/monetization/purchases/{id}'
    metadata:
      groupName: Monetization
      groupDescription: ''
      subgroup: ''
      subgroupDescription: ''
      title: 'Retrieve purchase details'
      description: ''
      authenticated: true
      deprecated: false
      custom: []
    headers:
      Authorization: 'Bearer {YOUR_ACCESS_TOKEN}'
      Content-Type: application/json
      Accept: application/json
    urlParameters:
      id:
        name: id
        description: 'The ID of the purchase.'
        required: true
        example: 16
        type: integer
        enumValues: []
        exampleWasSpecified: false
        nullable: false
        custom: []
      purchase:
        name: purchase
        description: 'The purchase identifier.'
        required: true
        example: 16
        type: integer
        enumValues: []
        exampleWasSpecified: false
        nullable: false
        custom: []
    cleanUrlParameters:
      id: 16
      purchase: 16
    queryParameters: []
    cleanQueryParameters: []
    bodyParameters: []
    cleanBodyParameters: []
    fileParameters: []
    responses:
      -
        status: 401
        content: '{"message":"Unauthenticated."}'
        headers:
          cache-control: 'no-cache, private'
          content-type: application/json
          access-control-allow-origin: '*'
        description: null
        custom: []
    responseFields: []
    auth:
      - headers
      - Authorization
      - 'Bearer 6g43cv8PD1aE5beadkZfhV6'
    controller: null
    method: null
    route: null
    custom: []
  -
    httpMethods:
      - POST
    uri: 'api/monetization/purchases/{purchase_id}/bump'
    metadata:
      groupName: Monetization
      groupDescription: 'Refresh the ad associated with the purchase to the top of listings when supported by the plan.'
      subgroup: ''
      subgroupDescription: ''
      title: 'Apply ad bump'
      description: ''
      authenticated: true
      deprecated: false
      custom: []
    headers:
      Authorization: 'Bearer {YOUR_ACCESS_TOKEN}'
      Content-Type: application/json
      Accept: application/json
    urlParameters:
      purchase_id:
        name: purchase_id
        description: 'The ID of the purchase.'
        required: true
        example: 16
        type: integer
        enumValues: []
        exampleWasSpecified: false
        nullable: false
        custom: []
      purchase:
        name: purchase
        description: 'The purchase identifier.'
        required: true
        example: 16
        type: integer
        enumValues: []
        exampleWasSpecified: false
        nullable: false
        custom: []
    cleanUrlParameters:
      purchase_id: 16
      purchase: 16
    queryParameters: []
    cleanQueryParameters: []
    bodyParameters: []
    cleanBodyParameters: []
    fileParameters: []
    responses:
      -
        status: 200
        content: |-
          {
            "data": {
              "id": 16,
              "ad_id": 42,
              "plan": {
                "id": 5,
                "name": "Premium Weekly",
                "slug": "premium-weekly",
                "description": "Promote the ad for seven days.",
                "price": 90000,
                "currency": "IRR",
                "duration_days": 7,
                "features": {
                  "highlight": true,
                  "bump": true
                }
              },
              "amount": 90000,
              "currency": "IRR",
              "payment_status": "paid",
              "payment_gateway": "payping",
              "starts_at": "2025-01-01T00:00:00+00:00",
              "ends_at": "2025-01-08T00:00:00+00:00",
              "meta": {},
              "payments": []
            }
          }
        headers: []
        description: ''
        custom: []
    responseFields: []
    auth:
      - headers
      - Authorization
      - 'Bearer 6g43cv8PD1aE5beadkZfhV6'
    controller: null
    method: null
    route: null
    custom: []
  -
    httpMethods:
      - GET
    uri: api/monetization/payments
    metadata:
      groupName: Monetization
      groupDescription: "Fetch a paginated list of the authenticated user's payments."
      subgroup: ''
      subgroupDescription: ''
      title: 'List payments'
      description: ''
      authenticated: true
      deprecated: false
      custom: []
    headers:
      Authorization: 'Bearer {YOUR_ACCESS_TOKEN}'
      Content-Type: application/json
      Accept: application/json
    urlParameters: []
    cleanUrlParameters: []
    queryParameters:
      status:
        name: status
        description: 'Filter by payment status.'
        required: false
        example: paid
        type: string
        enumValues: []
        exampleWasSpecified: true
        nullable: true
        custom: []
      gateway:
        name: gateway
        description: 'Filter by gateway key.'
        required: false
        example: payping
        type: string
        enumValues: []
        exampleWasSpecified: true
        nullable: true
        custom: []
      ad_id:
        name: ad_id
        description: 'Limit to payments linked to the specified ad.'
        required: false
        example: 42
        type: integer
        enumValues: []
        exampleWasSpecified: true
        nullable: true
        custom: []
      purchase_id:
        name: purchase_id
        description: 'Limit to payments for a specific purchase.'
        required: false
        example: 15
        type: integer
        enumValues: []
        exampleWasSpecified: true
        nullable: true
        custom: []
      per_page:
        name: per_page
        description: 'Results per page (max 100).'
        required: false
        example: 20
        type: integer
        enumValues: []
        exampleWasSpecified: true
        nullable: true
        custom: []
    cleanQueryParameters:
      status: paid
      gateway: payping
      ad_id: 42
      purchase_id: 15
      per_page: 20
    bodyParameters: []
    cleanBodyParameters: []
    fileParameters: []
    responses:
      -
        status: 200
        content: |-
          {
            "data": [
              {
                "id": 12,
                "amount": 25000,
                "currency": "IRR",
                "gateway": "payping",
                "status": "paid",
                "ref_id": "ABC123",
                "tracking_code": "TRK-XYZ",
                "paid_at": "2025-01-01T12:00:00+00:00",
                "redirect_url": null
              }
            ],
            "links": [
              {
                "url": "http://localhost/api/monetization/payments?page=1",
                "label": "1",
                "active": true
              },
              {
                "url": "http://localhost/api/monetization/payments?page=2",
                "label": "2",
                "active": false
              }
            ],
            "meta": {
              "current_page": 1,
              "from": 1,
              "last_page": 5,
              "path": "http://localhost/api/monetization/payments",
              "per_page": 15,
              "to": 15,
              "total": 75
            }
          }
        headers: []
        description: ''
        custom: []
    responseFields: []
    auth:
      - headers
      - Authorization
      - 'Bearer 6g43cv8PD1aE5beadkZfhV6'
    controller: null
    method: null
    route: null
    custom: []
  -
    httpMethods:
      - POST
    uri: api/monetization/payments
    metadata:
      groupName: Monetization
      groupDescription: 'Initialize a new payment for an existing ad plan purchase.'
      subgroup: ''
      subgroupDescription: ''
      title: 'Create payment'
      description: ''
      authenticated: true
      deprecated: false
      custom: []
    headers:
      Authorization: 'Bearer {YOUR_ACCESS_TOKEN}'
      Content-Type: application/json
      Accept: application/json
    urlParameters: []
    cleanUrlParameters: []
    queryParameters: []
    cleanQueryParameters: []
    bodyParameters:
      purchase_id:
        name: purchase_id
        description: 'Identifier of the ad plan purchase to pay for.'
        required: true
        example: 10
        type: integer
        enumValues: []
        exampleWasSpecified: true
        nullable: false
        custom: []
      gateway:
        name: gateway
        description: 'optional Override the payment gateway key.'
        required: false
        example: zarinpal
        type: string
        enumValues: []
        exampleWasSpecified: true
        nullable: true
        custom: []
    cleanBodyParameters:
      purchase_id: 10
      gateway: zarinpal
    fileParameters: []
    responses:
      -
        status: 200
        content: |-
          {
            "data": {
              "id": 30,
              "amount": 90000,
              "currency": "IRR",
              "gateway": "payping",
              "status": "pending",
              "ref_id": null,
              "tracking_code": null,
              "paid_at": null,
              "redirect_url": "https://api.payping.ir/v2/payments/XXX"
            }
          }
        headers: []
        description: ''
        custom: []
    responseFields:
      data.redirect_url:
        name: data.redirect_url
        description: 'Gateway redirection URL when available.'
        required: false
        example: null
        type: string|null
        enumValues: []
        exampleWasSpecified: false
        nullable: false
        custom: []
    auth:
      - headers
      - Authorization
      - 'Bearer 6g43cv8PD1aE5beadkZfhV6'
    controller: null
    method: null
    route: null
    custom: []
  -
    httpMethods:
      - POST
    uri: 'api/monetization/purchases/{purchase_id}/payments/initiate'
    metadata:
      groupName: Monetization
      groupDescription: ''
      subgroup: ''
      subgroupDescription: ''
      title: 'Initiate payment for purchase'
      description: ''
      authenticated: true
      deprecated: false
      custom: []
    headers:
      Authorization: 'Bearer {YOUR_ACCESS_TOKEN}'
      Content-Type: application/json
      Accept: application/json
    urlParameters:
      purchase_id:
        name: purchase_id
        description: 'The ID of the purchase.'
        required: true
        example: 16
        type: integer
        enumValues: []
        exampleWasSpecified: false
        nullable: false
        custom: []
      purchase:
        name: purchase
        description: 'The purchase identifier.'
        required: true
        example: 16
        type: integer
        enumValues: []
        exampleWasSpecified: false
        nullable: false
        custom: []
    cleanUrlParameters:
      purchase_id: 16
      purchase: 16
    queryParameters: []
    cleanQueryParameters: []
    bodyParameters:
      gateway:
        name: gateway
        description: 'optional Override the payment gateway key.'
        required: false
        example: stripe
        type: string
        enumValues: []
        exampleWasSpecified: true
        nullable: true
        custom: []
    cleanBodyParameters:
      gateway: stripe
    fileParameters: []
    responses:
      -
        status: 200
        content: |-
          {
            "data": {
              "id": 32,
              "amount": 90000,
              "currency": "IRR",
              "gateway": "stripe",
              "status": "pending",
              "ref_id": null,
              "tracking_code": null,
              "paid_at": null,
              "redirect_url": "https://checkout.stripe.com/pay/abc123"
            }
          }
        headers: []
        description: ''
        custom: []
    responseFields:
      data.redirect_url:
        name: data.redirect_url
        description: 'Gateway redirection URL when available.'
        required: false
        example: null
        type: string|null
        enumValues: []
        exampleWasSpecified: false
        nullable: false
        custom: []
    auth:
      - headers
      - Authorization
      - 'Bearer 6g43cv8PD1aE5beadkZfhV6'
    controller: null
    method: null
    route: null
    custom: []
  -
    httpMethods:
      - POST
    uri: 'api/monetization/payments/{payment_id}/validate'
    metadata:
      groupName: Monetization
      groupDescription: 'Manually trigger validation for a payment after returning from the gateway.'
      subgroup: ''
      subgroupDescription: ''
      title: 'Validate payment'
      description: ''
      authenticated: true
      deprecated: false
      custom: []
    headers:
      Authorization: 'Bearer {YOUR_ACCESS_TOKEN}'
      Content-Type: application/json
      Accept: application/json
    urlParameters:
      payment_id:
        name: payment_id
        description: 'The ID of the payment.'
        required: true
        example: 16
        type: integer
        enumValues: []
        exampleWasSpecified: false
        nullable: false
        custom: []
    cleanUrlParameters:
      payment_id: 16
    queryParameters: []
    cleanQueryParameters: []
    bodyParameters:
      payload:
        name: payload
        description: 'optional Gateway callback payload.'
        required: false
        example:
          authority: A0001
        type: object
        enumValues: []
        exampleWasSpecified: true
        nullable: true
        custom: []
    cleanBodyParameters:
      payload:
        authority: A0001
    fileParameters: []
    responses:
      -
        status: 200
        content: |-
          {
            "data": {
              "id": 32,
              "amount": 90000,
              "currency": "IRR",
              "gateway": "payping",
              "status": "paid",
              "ref_id": "ABC123",
              "tracking_code": "TRK-XYZ",
              "paid_at": "2025-01-01T12:00:00+00:00",
              "redirect_url": null
            }
          }
        headers: []
        description: ''
        custom: []
    responseFields: []
    auth:
      - headers
      - Authorization
      - 'Bearer 6g43cv8PD1aE5beadkZfhV6'
    controller: null
    method: null
    route: null
    custom: []
  -
    httpMethods:
      - POST
    uri: api/monetization/payments/verify
    metadata:
      groupName: Monetization
      groupDescription: 'Process an asynchronous callback received directly from the payment gateway.'
      subgroup: ''
      subgroupDescription: ''
      title: 'Verify payment callback'
      description: ''
      authenticated: true
      deprecated: false
      custom: []
    headers:
      Authorization: 'Bearer {YOUR_ACCESS_TOKEN}'
      Content-Type: application/json
      Accept: application/json
    urlParameters: []
    cleanUrlParameters: []
    queryParameters: []
    cleanQueryParameters: []
    bodyParameters:
      gateway:
        name: gateway
        description: 'Payment gateway key for the callback.'
        required: true
        example: payping
        type: string
        enumValues: []
        exampleWasSpecified: true
        nullable: false
        custom: []
      payload:
        name: payload
        description: 'Raw callback payload forwarded from the gateway.'
        required: true
        example:
          status: paid
        type: object
        enumValues: []
        exampleWasSpecified: true
        nullable: false
        custom: []
    cleanBodyParameters:
      gateway: payping
      payload:
        status: paid
    fileParameters: []
    responses:
      -
        status: 200
        content: |-
          {
            "data": {
              "id": 32,
              "amount": 90000,
              "currency": "IRR",
              "gateway": "payping",
              "status": "paid",
              "ref_id": "ABC123",
              "tracking_code": "TRK-XYZ",
              "paid_at": "2025-01-01T12:00:00+00:00",
              "redirect_url": null
            }
          }
        headers: []
        description: ''
        custom: []
    responseFields: []
    auth:
      - headers
      - Authorization
      - 'Bearer 6g43cv8PD1aE5beadkZfhV6'
    controller: null
    method: null
    route: null
    custom: []
  -
    httpMethods:
      - GET
    uri: 'api/monetization/ads/{ad_id}/payments'
    metadata:
      groupName: Monetization
      groupDescription: 'Retrieve payments associated with a specific ad owned by the authenticated user.'
      subgroup: ''
      subgroupDescription: ''
      title: 'List ad payments'
      description: ''
      authenticated: true
      deprecated: false
      custom: []
    headers:
      Authorization: 'Bearer {YOUR_ACCESS_TOKEN}'
      Content-Type: application/json
      Accept: application/json
    urlParameters:
      ad_id:
        name: ad_id
        description: 'The ID of the ad.'
        required: true
        example: 1
        type: integer
        enumValues: []
        exampleWasSpecified: false
        nullable: false
        custom: []
      ad:
        name: ad
        description: 'The ad identifier.'
        required: true
        example: 16
        type: integer
        enumValues: []
        exampleWasSpecified: false
        nullable: false
        custom: []
    cleanUrlParameters:
      ad_id: 1
      ad: 16
    queryParameters:
      per_page:
        name: per_page
        description: 'Results per page (max 100).'
        required: false
        example: 15
        type: integer
        enumValues: []
        exampleWasSpecified: true
        nullable: false
        custom: []
    cleanQueryParameters:
      per_page: 15
    bodyParameters: []
    cleanBodyParameters: []
    fileParameters: []
    responses:
      -
        status: 200
        content: |-
          {
            "data": [
              {
                "id": 40,
                "amount": 50000,
                "currency": "IRR",
                "gateway": "payping",
                "status": "paid",
                "ref_id": "REF40",
                "tracking_code": "TRK-40",
                "paid_at": "2025-01-02T08:00:00+00:00",
                "redirect_url": null
              }
            ],
            "links": [
              {
                "url": "http://localhost/api/monetization/ads/37/payments?page=1",
                "label": "1",
                "active": true
              }
            ],
            "meta": {
              "current_page": 1,
              "from": 1,
              "last_page": 1,
              "path": "http://localhost/api/monetization/ads/37/payments",
              "per_page": 15,
              "to": 1,
              "total": 1
            }
          }
        headers: []
        description: ''
        custom: []
    responseFields: []
    auth:
      - headers
      - Authorization
      - 'Bearer 6g43cv8PD1aE5beadkZfhV6'
    controller: null
    method: null
    route: null
    custom: []
  -
    httpMethods:
      - GET
    uri: api/monetization/wallet
    metadata:
      groupName: Monetization
      groupDescription: 'Retrieve the current wallet balance for the authenticated user. A wallet will be created automatically when missing.'
      subgroup: ''
      subgroupDescription: ''
      title: 'Show wallet balance'
      description: ''
      authenticated: true
      deprecated: false
      custom: []
    headers:
      Authorization: 'Bearer {YOUR_ACCESS_TOKEN}'
      Content-Type: application/json
      Accept: application/json
    urlParameters: []
    cleanUrlParameters: []
    queryParameters: []
    cleanQueryParameters: []
    bodyParameters: []
    cleanBodyParameters: []
    fileParameters: []
    responses:
      -
        status: 401
        content: '{"message":"Unauthenticated."}'
        headers:
          cache-control: 'no-cache, private'
          content-type: application/json
          access-control-allow-origin: '*'
        description: null
        custom: []
    responseFields:
      data.id:
        name: data.id
        description: 'Wallet identifier.'
        required: false
        example: null
        type: integer
        enumValues: []
        exampleWasSpecified: false
        nullable: false
        custom: []
      data.balance:
        name: data.balance
        description: 'Current available balance.'
        required: false
        example: null
        type: number
        enumValues: []
        exampleWasSpecified: false
        nullable: false
        custom: []
      data.currency:
        name: data.currency
        description: 'ISO currency code of the wallet.'
        required: false
        example: null
        type: string
        enumValues: []
        exampleWasSpecified: false
        nullable: false
        custom: []
    auth:
      - headers
      - Authorization
      - 'Bearer 6g43cv8PD1aE5beadkZfhV6'
    controller: null
    method: null
    route: null
    custom: []
  -
    httpMethods:
      - POST
    uri: api/monetization/wallet/top-up
    metadata:
      groupName: Monetization
      groupDescription: 'Increase the wallet balance using an offline credit. Amount is applied immediately.'
      subgroup: ''
      subgroupDescription: ''
      title: 'Top up wallet'
      description: ''
      authenticated: true
      deprecated: false
      custom: []
    headers:
      Authorization: 'Bearer {YOUR_ACCESS_TOKEN}'
      Content-Type: application/json
      Accept: application/json
    urlParameters: []
    cleanUrlParameters: []
    queryParameters: []
    cleanQueryParameters: []
    bodyParameters:
      amount:
        name: amount
        description: 'Amount to deposit.'
        required: true
        example: 50000.0
        type: number
        enumValues: []
        exampleWasSpecified: true
        nullable: false
        custom: []
      currency:
        name: currency
        description: 'ISO 4217 currency code.'
        required: true
        example: IRR
        type: string
        enumValues: []
        exampleWasSpecified: true
        nullable: false
        custom: []
    cleanBodyParameters:
      amount: 50000.0
      currency: IRR
    fileParameters: []
    responses: []
    responseFields: []
    auth:
      - headers
      - Authorization
      - 'Bearer 6g43cv8PD1aE5beadkZfhV6'
    controller: null
    method: null
    route: null
    custom: []
